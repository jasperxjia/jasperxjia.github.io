<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Haptic-Audio Based Landmark Navigation for VIP Demo</title>

    <link rel="stylesheet" href="./style.css">

    
    <!-- Aframe and AR.js -->
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
    <script src="./aframe-ar.js"></script>

    <!-- Haptic API >
    <script type="text/javascript" src="//raw.githubusercontent.com/shantanubala/haptics.js/master/haptics.js"></script-->

    <!-- Web Audio API -->

</head>



<!-- Dynamically add places from Foursquare API
<script src="./script.js"></script-->




<!-- AR scene Render -->
<body style='margin: 0; overflow: hidden;'>


  <a-scene object-model id="thescene" cursor="fuse:false; rayOrigin: mouse" embedded arjs="sourceType: webcam; trackingMethod: best;">

    <a-assets>
      <a-asset-item id="mega" src="./assets/lowpoly_pin/scene.gltf"></a-asset-item>
    </a-assets>
    
    <a-marker id="marker" preset='hiro'>
      <a-entity onclick="speechSynthesis.speak(new SpeechSynthesisUtterance('A pin'))" gltf-model="#mega" scale="0.2 0.2 0.2" position="0 0 0" rotation="-90 0 0" object-model id="castle"></a-entity>
      <a-entity geometry="primitive: plane;" material="opacity: 0">
        <a-text value="Clicked!" visible="false" id="text-box" position="-0.425 0.293 -0.531" rotation="-84.347 54.042 -51.893"></a-text>
      </a-entity>
    </a-marker>

    <!-- add a basic camera -->
    <!-- So object will land on marker -->
    <a-entity camera>
    </a-entity>
  </a-scene>

  <script>




    AFRAME.registerComponent('object-model', {
      init: function () {
        
        const text = document.getElementById('text-box');
        const castle = document.getElementById("castle");
        
        

        castle.addEventListener('click', function (event) {
          if(text.object3D.visible == false && event.detail.cursorEl){
            text.object3D.visible = true;
          } });

          text.addEventListener('click', function (event) {
            text.object3D.visible = false;
          } );

       

        
      }
    });
    const model = markerObject3D;
    model.addEventListener('loaded',alert('marker loaded'));
 </script>
            <!--a-entity  
            
            position="0 0 -1"
            geometry="primitive: sphere; radius:0.01;"
            material="color: black; shader: flat">
        </a-entity-->


</body>
</html>
